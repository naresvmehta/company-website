<%- layout("layouts/boilerplate") %>

<div class="container" style="margin-top: 30px; margin-bottom: 50px;">
  <div class="panel panel-success">
    <div class="panel-heading">
      <h3 class="panel-title">Edit Product</h3>
    </div>

    <div class="panel-body">
      <form action="/products/<%= product._id %>?_method=PUT" method="POST" enctype="multipart/form-data">
        <!-- Title -->
        <div class="form-group">
          <label for="title">Plant Name*</label>
          <input type="text" name="title" id="title" class="form-control" value="<%= product.title %>" required>
        </div>

        <!-- Current Cover Image Preview -->
        <div class="form-group">
          <label>Current Cover Image Preview</label><br>
          <img src="<%= product.coverImage.url %>" style="height: 200px; border-radius: 5px;">
        </div>

        <!-- Upload New Image -->
        <div class="form-group">
          <label for="coverImage">Replace Cover Image (optional)</label>
          <input type="file" name="coverImage" id="coverImage" class="form-control" accept="image/*">
        </div>

        <!-- Description -->
        <div class="form-group">
          <label for="description">Description</label>
          <textarea name="description" id="description" rows="10" class="form-control"><%= product.description %></textarea>
        </div>

        <button type="submit" class="btn btn-success btn-block">Update Product</button>
      </form>
    </div>
  </div>
</div>

<script src="https://cdn.ckeditor.com/ckeditor5/35.0.1/classic/ckeditor.js"></script>
<script>
  ClassicEditor
    .create(document.querySelector('#description'), {
      ckfinder: {
        uploadUrl: '/upload-image'
      },
      toolbar: [
        'heading', '|', 'bold', 'italic', 'bulletedList', 'numberedList', '|',
        'insertTable', 'blockQuote', '|', 'imageUpload', 'undo', 'redo'
      ]
    })
    .catch(error => console.error(error));
</script>

